## Introduction:

In this paper we analyse the Dynamic Conditional Correlation Model proposed by Robert Engle in 2002. Specifically, we try to test whether DCC is able to precisely estimate the multivariate conditional correlation between the variances of various financial assets. 

The author argues that traditional approaches to modeling the correlation between assets, which assume that the correlation is constant over time, do not accurately capture the complexity of financial markets. 

In order to address this issue, the paper proposes a class of multivariate generalized autoregressive conditional heteroskedasticity (GARCH) models that allow for time-varying correlations between assets. The paper also proposes a new type of model called the DCC model to solve the problem of inaccurate and inflexible traditional approaches to modelling correlation between financial assets. The DCC model is based on the commonly used GARCH models but includes a dynamic conditional correlation matrix that accounts for changes in the relationship between assets over time. The author highlights the simplicity and flexibility of the DCC model, which makes it easy for researchers to use to model the dynamic conditional correlation between financial assets.Our results show that the proposed model is more accurately able to calculate conditional correlation as compared to not only simple models like equal and exponentially weighted correlation but also complex systems like the OGARCH model and the BEKK model. 

The results are evaluated by comparing the daily correlation generated by each of the models with various estimators and calculating goodness of fit. Five estimators have been used in this paper: fast sine, sine, step, ramp and constant value of 0.9. 

## Literature Review

The basic conditional correlation between two random variables r1 and r2 can be defined as:

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/ca3200ef-b7e0-4130-a964-c351b9fceb14)

The prior-period data serve as the foundation for this definition of the conditional correlation; The correlation forecasts for multiple periods can be defined in the same way. All of the defined correlations must fall within the interval [-1, 1] according to probability laws. This restriction is met by the conditional correlation for all linear combinations of the variables and all possible realizations of the previous information.


There are quite a few conditional correlation models which were compared with the proposed Dynamic Conditional Correlation model. 

**The Orthogonal GARCH** model by Alexander (1998, 2001) tackle two major challenges in financial time series modeling: kurtosis and asymmetry in the conditional distribution of returns. The OGARCH method utilizes orthogonal transformations of the original returns series to obtain a new series with a more symmetrical distribution and lower kurtosis. The technique involves a diagonal matrix of the variance-covariance matrix of the standardized residuals from a standard GARCH model. The resulting orthogonalized series is then utilized to estimate a new GARCH model. The OGARCH method is advantageous in improving the accuracy of volatility forecasting by capturing the time-varying dynamics of volatility. This is particularly relevant in financial applications where volatility forecasting is crucial for investment decisions and risk management. However, the OGARCH method has some limitations. The method demands a significant amount of computational power and may not be suitable for large-scale applications. Furthermore, the method assumes that the conditional distribution of returns is Gaussian, which may not be suitable in all cases. Overall, the OGARCH method is a valuable extension of the standard GARCH model that can address some of the limitations of traditional volatility models. 

The **BEKK model**, also known as the Baba, Engle, Kraft, and Kroner model, is a type of multivariate GARCH model that is utilized to model the volatility of multiple financial assets concurrently. The BEKK model extends the univariate GARCH model to the multivariate case by permitting the conditional covariance between assets to be modelled as a function of prior shocks to the system. The BEKK model specifies the conditional covariance matrix of the assets as a function of the past shocks to the system and the past conditional covariance matrix. Specifically, the model assumes that the conditional covariance matrix follows a GARCH-type process, where the conditional covariance at time t is a function of the past conditional covariance matrices and the past shocks.
![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/d3f7ca48-4531-45c5-9797-8d99b1069379)



Here Omega is a function the unconditional covariance of the financial asset’s returns. It serves as the starting point for the estimation of the conditional covariance matrix. The model assumes that the conditional covariance matrix at time t depends on the past squared residuals and the unconditional covariance matrix, which captures the long-run volatility structure of the financial returns.

The correlation matrix between assets is not explicitly estimated by the BEKK model. Instead, the estimated conditional covariance matrix implies the correlation between assets. Thus, the model allows for the possibility that the volatility of one asset may be influenced by the volatility of another asset. One of the primary benefits of the BEKK model is that it can capture the time-varying dynamics of correlation between assets. This is especially important in financial applications where the correlation between assets can change rapidly over time, and accurate modelling of this correlation is crucial for risk management and portfolio optimization. Another benefit of the BEKK model is that it is relatively easy to estimate using standard maximum likelihood techniques. Furthermore, the model allows for the integration of exogenous variables, such as macroeconomic indicators, that may influence the conditional covariance matrix. However, the BEKK model also has some limitations. One limitation is that it assumes that the conditional covariance matrix follows a specific parametric form, which may not be suitable in all cases. Additionally, the model can become computationally demanding when applied to large datasets or when estimating a large number of parameters. Overall, the BEKK model is a robust tool for modelling the volatility of multiple financial assets concurrently and can provide valuable insights into the time-varying dynamics of correlation between assets. However, like any modelling approach, it has its strengths and limitations and should be used with appropriate care and caution.

The BEKK Model has two popular variants: Scalar BEKK and Diagonal BEKK. The scalar BEKK assumes  elements of the matrices A and B are scalar values The Omega is calculated as *(1 – α –β)S*. This means that the lagged effects of the past squared errors on the conditional covariance matrix are the same for each pair of assets. Computationally this is a relatively simple model. The Diagonal BEKK model assumes that the elements of the matrices A and B are diagonal matrices. The vector Omega is calculated as *(I – A – B) Vec(S).* Here the lagged effects of the past squared errors on the conditional covariance matrix are different for each pair of assets. It is more flexible compared to the scalar model but consequently it is also more computationally expensive. 

The **Constant Conditional Correlation** model by  Bollerslev is an expansion of the constant correlation model that enables the chance of time-varying correlations among various variables. The model hypothesizes that the correlations between variables are not fixed but rather fluctuate over time. This allows the model to capture the dynamic relationships among different assets and how they change in response to market conditions or other factors.

<i>H<sub>t</sub>  =</i> <i>D<sub>t</sub> R D<sub>t</sub></i>

The model can be mathematically represented using a covariance matrix that varies over time. This matrix contains the variances of each individual variable and the varying covariances between each pair of variables. The time-varying covariance matrix is estimated using a multivariate generalized autoregressive conditional heteroskedasticity model, which enables the estimation of both the mean and volatility of the variables in the model.

One of the primary benefits of the CCC model is its ability to provide more accurate risk estimates compared to the constant correlation model. By allowing for time-varying correlations among assets, the model can more effectively capture the impact of changing market conditions on portfolio risk. However, the CCC model does have certain limitations. For instance, estimating the time-varying covariance matrix can be computationally demanding, particularly with large datasets. Additionally, the model may not account for all the complex relationships among different assets, particularly in situations where there are nonlinear or asymmetric effects.

## DCC Model and Estimators

The Dynamic Conditional Correlation Model can be viewed as a generalization of the Constant Conditional Correlation model. Whereas in the CCC model, depicted by H<sub>t</sub>  = D<sub>t</sub> R D<sub>t</sub>, the matrix R is a constant correlation matrix, the DCC model takes it to be time varying. As such, the model can be denoted as:

<i>H<sub>t</sub>  =</i> <i>D<sub>t</sub> R<sub>t</sub> D<sub>t</sub></i>

Here R<sub>t</sub> is the t-th conditional correlation matrix, H<sub>t</sub> is the t-th conditional variance-covariance matrix, and Dt is a diagonal matrix of H<sub>t</sub>'s diagonal elements. The DCC model calculates the time-varying correlation matrix Rt by adjusting the previous time period's correlation matrix with the current conditional variance-covariance matrix Ht.

The DCC model consists of two steps. First we estimate a GARCH model for the conditional variance of each time series. This step models the volatility dynamics of each individual time series. Next we estimate the DCC model for the correlation between the two time series. The DCC model allows the correlation between two time series to vary over time and is capable of capturing the short-term and long-term changes in the correlation structure. 

This model is superior to other multivariate models in several ways. It is capable of handling non-constant conditional correlations and is adaptable enough to capture both short-term and long-term changes in correlation structure. The DCC model is also computationally efficient, allowing it to be used to analyse large datasets with multiple variables.

A Log Likelihood Mean reverting DCC model uses the GARCH(1,1) model to calculate the correlation matrix as: 

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/3da71947-5fba-4e30-af4d-10673d9587bb)


The correlation estimator is defined using the following function:
![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/8c746d7f-2cd7-4d31-b14e-0371fd482efe)


The model is mean reverting as long as (α+β) is less than one.

In our study we compare the Mean Absolute error of three correlation models:

1. Moving Average over past 100 trading days
1. Exponentially moving average with a factor of 0.06
1. Mean reverting Dynamic conditional correlation model with log likelihood

The results of these were compared to five estimators:

1. Fast sine 	ρ<sub>t</sub> = 0.5 + 0.4 cos(2πt/20)
1. Sine		ρ<sub>t</sub> = 0.5 + 0.4 cos(2πt/200)
1. Step		ρ<sub>t</sub> = 0.5 + 0.5 (t>500)
1. Ramp		ρ<sub>t</sub> = mod (t/200)
1. Constant 0.9	ρ<sub>t</sub> = 0.9 

These estimators were chosen to test for various behaviour patterns exhibited by the resultant series. For example, a close similarity to fast sine compared to sine shows that the series is rapidly changing as opposed to gradual changes. A close resemblance to step function opposed to others shows it is not mean reverting. This function also warns us about periods of consistency. The Ramp function is used to discern abrupt changes in the data series. Here is a visualisation of these functions for a better comprehension.

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/ff8a4177-d715-4885-9a8b-a8aff626c159)

Performance was measured using the mean absolute error. This is defined as:

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/8c16aa11-a667-4246-8839-c57dd4992f41)


The estimated correlation is the denoted by rho hat. A smaller value is desirable in this test. Smaller the value, better the model.

#
# Implementation
The code is a Python script that performs various statistical analyses and generates visualizations based on financial market data. Here's a brief summary of what the code does:

- Imports required packages such as pandas, numpy, statsmodels, plotly, and others.
- Defines a function called "vector\_l" that extracts the lower triangular elements of a matrix and returns them as a vector.
- Defines a function called "dcc\_function\_to\_max" that calculates the log-likelihood function of the dynamic conditional correlation (DCC) model given a set of parameters and a time series of data.
- Defines a function called "matrix\_operations" that calculates the covariance matrix and correlation matrix for a set of financial returns using the DCC model.
- Defines a function called "run\_garch\_on\_return" that fits a GARCH model to a set of financial returns, converts the returns to standardized residuals using the fitted model, and calculates the cumulative distribution function (CDF) of the standardized residuals using a Student's t distribution.
- Loads financial market data from a CSV file, computes the returns of the two assets, and runs the GARCH model and DCC model on the returns.
- Defines a function called "update\_corr\_data" that updates a visualization of the DCC vs. unconditional correlation for a given asset pair based on user input.
- Calls the main function of the script to run the program, which outputs the results of the analysis and visualizations.



# Results

In our study we emulated five asset pairs:

1. Nasdaq Composite 	VS	Dow Jones Industrial Average 	
1. NYSE Composite 	VS  	Dow Jones Industrial Average 
1. NYSE Composite	VS	Treasury Bonds 10 YY
1. NYSE Composite 	VS 	USD –EUR Exchange Rate
1. NYSE Composite	VS	Bitcoin USD

The first comparison ( NASDAQ vs Dow Jones) was essentially to draw parallels between the authors findings and our own. In the next four we compare the NYSE Composite against various modern asset classes. The Dow Jones for the stock market, Treasury bonds for the risk free rate. The Euro-USD exchange to evaluate how the American stock market and the Euro react to minute changes in each other. Finally we also compare the NYSE composite against the Bitcoin daily adjusted close since crypto has been rising exponentially as an investment asset class and it would be interesting to find the correlation it has to the stock market. 

We use Yahoo finance to gather the adjusted close prices of all these assets. We sought to run our test on a consistent period of time (2000 to 2022) but since not all these assets have existed over the specified period, we took data over shorter periods for some. The Euro was only introduced in 2002 and so we have analysed it from 2003 onwards. Similarly, Bitcoin was analysed from 2015 to 2022. 

The mean absolute error of the three different models across the five specified estimators resulted as follows:

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/9e2cf2f2-d044-4173-969e-1e83ce7bbabe)


We observe that for the first four estimators (sine, fast sine, step and ramp), the DCC model has the lowest mean absolute error compared to moving average 100 and exponentially weighted models. In the fifth estimator for constant rho of 0.9 the exponentially weighted model is only marginally better than the DCC model. From this we can conclude that the DCC model is the best model with the least mean absolute error overall.

## NASDAQ Composite VS Dow Jones Industrial Average

**Cumulative Returns**

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/0001ec34-9611-46f9-8565-7b235175e636)

It is helpful to gather an idea of the cumulative returns of the two securities over time before we move on to the advanced analysis of volatility and covariance. Here we see a general trend of the two assets mirroring each other’s movements over time. 


**GARCH Conditional Volatility – Time Series**

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/fc90b4aa-96d7-4e5e-9451-8907f5467ddc)

This graph depicts the two DCC time series for conditional volatility of the NASDAQ Composite(^IXIC) and the Dow Jones Industrial Average(^DJI). We can observe that the two move in lock step for almost the entire period with the brief exception of the period in the early 2000’s. This shows us that when the volatility of one asset increases, the same can be observed in that of the other asset. 

**GARCH Volatility – Assets comparison**

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/414877d1-e9d9-4858-8acd-60fe1affee5c)

This graph depicts the GARCH volatility of the NASDAQ Composite (y axis) against Dow Jones Industrial Average (x axis). We see that in majority of the cases the points move in a 45 degree line. This tells us that the volatility change in one asset is mirrored by the other in majority of the cases

But there are a few exceptional cases. For example let us look at the spike of observations marked by the red box below. This shows us that in one event (Jan 2001) the volatility of NASDAQ was quite high and reached a maximum of 98.78 while the volatility of Dow Jones hovered around the low to mid-twenties. These observations can be noted in the extract of the dataframe shown below. 

Two other similar outlier events can be noted and are marked by the green box in the graph.

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/38f36e67-1f85-4da6-9585-9a6ae6b4585a) ![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/3938847e-0742-453a-9999-fa0bd54478e5)



This visualisation seems particularly interesting since we can clearly observe the effect of periods of abnormal events. It shows us the evolution of volatility of one security against another in general.

**DCC Vs Unconditional Correlation vs Moving Average**

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/8e23912e-1501-413e-b9d0-460db372277f)

In order to evaluate the results of the conditional correlation, it is helpful to also have the unconditional correlation as a frame of reference. This can be noted as the red line in the graph above. The moving average 100 correlation is denoted by the green line and our modelled DCC is represented by the blue line. 

We see that the unconditional simple correlation is 0.812. This seems like a high number to use even for the brief periods of time where we can notice very less correlation between the variances of the assets. That was the infact the reason there was a need to model conditional correlation models. 

Next, we observe at the moving average model and it is instantly evident that the model is extremely chaotic. 

To analyse this further, let us also overlap the price movements of the two assets on the secondary y axis. 

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/68717cd9-e429-4b0d-be23-86e332450718)


We see that the green line moves hysterically and reacts aggressively to inconsequential and insignificant events. One such example can be seen in the extract below:

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/983ef4a4-b2d3-40c9-a11e-effe28e5a811)


We note that in May 2014, the moving average goes below zero from its average around 0.812 even though there were no significant events in the previous 100 days (which would be about 5 calendar months assuming 20 trading days in each month). This just goes to prove to us how inept and inaccurate the moving average 100 model is. 

Let us observe the movement of DCC model in the same period. The blue line depicting the DCC model can be observed oscillating about the unconditional correlation. But nowhere can we see the hysteresis as in the moving average model. 

On top of being more accurate, the DCC model takes more data into account while calculating the latest correlation values. 
# NYSE Composite VS Dow Jones Industrial Average 
![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/23086a55-1fef-4337-a3be-a938b3502d7e)
![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/812ea65e-08fe-49ac-9a58-4068867c87ea)
![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/e4999a45-d9b1-4151-a417-55676fd8bbdb)

In the GARCH Volatility plot of assets against each other below we see that the volatilities are perfectly correlated with each other without exception. This may be because both these assets are indices based on the stock market and it is virtually impossible for one index to move without mirroring the other.

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/b8589541-8019-42f8-b6f0-9886796f6ef5)

# NYSE Composite VS Bitcoin
Bitcoin has established itself as an important  financial asset in recent years specially in times of financial distress when traditional assets like stocks become unreliable. Despite its high volatility, the financial sector has slowly accepted Bitcoin (and cryptocurrency in general) as a prevalant financial asset. It will be interesting to see the correlation between NYSE and Bitcoin in the coming section.

(Note that this series starts from 2015 due to the late inception and adoption of cryptocurrencies) 

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/a0c05a57-4c2e-49b2-93cf-47759232e5ea)


Here we see the cumulative returns of Bitcoin against the NYSE Composite. It is understandable to see the exceptionally high returns of bitcoin because of its hype in the recent years and the boost in popularity during the pandemic.

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/9cee2d52-642b-4d37-8b47-8750f88082fb)


As mentioned before, it is expected to observe a high conditional volatility in Bitcoin compared to NYSE. In fact there doesn’t seem to be even a single instance where the volatility of NYSE exceeds that of Bitcoin. This is a result of cryptocurrencies being an unregulated asset class. It is possible for market makers with sufficient power to manipulate the price. 

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/8eeeb7b4-cb38-4e37-bea8-84a3833c6989)


Again while plotting the volatilities of the two assets against each other we see the relation to be more linear leaning towards the Bitcoin axis. It can be observed that the volatility of NYSE hovers in the range of 10 to 30 while bitcoin regularly experiences volatilities upto 120. 

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/88729c34-eabe-432f-9e70-4b73962f619f)


The graph shown above although very messy shows us some very interesting observations. 

First, we note that the unconditional volatility is barely above 0. From this alone we conclude that there is **little to no correlation** in the volatilities of the two assets. Next, the moving average (green line) can be seen oscillating violently about zero. This seems like a futile result and by a mere superficial observation we can conclude that this subpar model can not be used in any further analysis like for construction of optimal portfolios. Finally, we see the blue line depicting the DCC model. We see that this series is way more stable and consistent. Like the moving average model this also oscillates about zero but does not return extremely high absolute values. 

# NYSE Composite VS USD –EUR Exchange Rate

This section discusses the correlation of variance between NYSE Composite and the Euro exchange rate. This would be interesting to see as we would expect an **inverse relation** (negative conditional and unconditional correlation) between the two. This may be because as the American stock market goes down, the value of Dollar would be expected to depreciate resulting in the apparent appreciation of the value of the Euro. 

(Note that this series starts from 2005 since the Euro itself was only introduced in 2002) 

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/cae8fae2-daf7-4111-9604-be5ae4124655)


The graph above shows the cumulative result of the Euro-USD to be almost zero over the whole period of time. 

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/c6f4b4a8-44da-498f-8abb-5dc697197a23)


The conditional volatility of the Euro exchange rate is quite stable- as should be for a major international currency. The only noticeable spike is observed during the 2008 crisis. 

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/d5c072a3-c081-4023-8b60-54cf0155b124)


When plotting the volatilities against each other we see that a majority of the observations are clumped in the bottom left corner. But interestingly, there are a lot of outlying events which result in spikes all over the place. But in general we see the volatility spread across the entire period is larger for NYSE as it touches 110 while the Euro exchange rate barely exceeds 70 at its peak.

![image](https://github.com/20manubansal/Dynamic-Conditional-Correlation/assets/40740483/1040c52d-6d27-415c-8cc1-82f9728f2250)


As expected, we see the unconditional correlation is **below zero**. The moving average again oscillates frantically about zero. This result is unsettling and one would be wary about using it while modelling optimal portfolios and in other applications. These results again reinforce the need for more complex models than the moving average and the exponentially weighted models. The DCC model is far more stable and goes to lower absolute values and also fluctuates less. 

